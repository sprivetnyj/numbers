(()=>{"use strict";var n={};n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.p,n.p;const e={Click:new Howl({src:"./audio/click.wav",html5:!0}),Confetti:new Howl({src:"./audio/confetti.wav",html5:!0})},t=["\n-+d|\na+-|\n","\n++a|\nd++|\n","\nc+a|\n+a-|\n","\n+ac|\nca+|\n","\naf+|\n+c+|\n","\n-+f|\n++-|\n+a-|\n","\na++|\n+if|\n+++|\n","\n+++|\n+da|\na++|\n","\na+a|\n-++|\ne++|\n","\n-+a-|\n++-a|\n+d++|\n","\n-+++|\na+e+|\n+++-|\n","\n+++a|\n+-++|\n+ha-|\n","\n+e++|\n+++j|\n-a++|\n","\n+++a|\n+f+-|\n+a+e|\n","\n++m-|\n+++k|\na+-+|\n-+++|\n","\na-a+|\n++++|\ni+-+|\n-+++|\n","\n-+++|\n+f-+|\n++l+|\na+--|\n","\n-a++|\n++-+|\n++++|\nk-+a|\n","\n+++-|\n+a+-|\n++++|\n+-++|\n+j+-|\n","\na+++|\n-+++|\n++++|\n++l-|\na---|\n","\nj+--|\n+h+-|\n++++|\n-+a+|\n++++|\n","\n+++a|\n+g++|\n++++|\n-++-|\n-ia-|\n","\n++-r+|\n+++++|\n+-+++|\n+++a+|\n","\nal+++|\n+++-+|\n+-+++|\n++a--|\n","\na-++-|\n+++a+|\n-d+-+|\nh++a+|\n","\n--+++|\n++a-+|\n++g++|\n+ai+-|\n","\nh-f+-|\n+a+++|\n+-+a+|\n++++a|\n","\n-+++g|\n++a++|\nai-a+|\n++++-|\n+++--|\n","\n-++++|\n-++k+|\n++a++|\n+-+++|\ne++-u|\n","\na+++e|\n--+++|\n+++++|\n+-a++|\n+j++a|\n","\nk-+++|\n+++-+|\n+++ja|\n+-+++|\n+++-a|\n","\n++++l|\n++a++|\nh+-++|\n--a++|\n--+++|\n","\n+++x+|\n+++++|\n+h+++|\n+-+++|\n++++a|\n","\n+a++-|\n+-+++|\n+++++|\n++-z+|\n+++++|\n-++++|\n","\na+++a|\n-+++-|\na+e+g|\n-++++|\na++++|\n-++-j|\n","\na++++|\n++++j|\n+++++|\n--p--|\n+++++|\n++++z|\n","\n-++g-|\n-++f-|\n-++++|\na+i-a|\n-++a+|\n-++++|\n","\n+++-a|\n+++y+|\n+++++|\n+-f++|\n+-+++|\nn++++|\n","\n-++++|\n+++++|\n++u-+|\n-++++|\n++++a|\n+-+++|\n","\n-+++--|\n++-+++|\n++++-+|\n++-a++|\n+++3++|\n++++++|\n","\n-+++++|\n++++a+|\n+-++++|\n+-w+a+|\n++-+++|\n-+++++|\n","\na+-n++|\n++++++|\n++++++|\nk+++++|\n-++++-|\na++++a|\n","\n++-++-|\nj+-+++|\n++-+-+|\n++++++|\n++2++-|\n-++++a|\n","\n+oa+++|\n++++-+|\n++++g+|\n++++++|\na++am+|\n++++++|\n","\n+++-+a|\n+++++-|\n++++++|\n++++a+|\n++++++|\nq-++++|\n","\n++--+a|\no++++-|\n-++++-|\n-++++-|\n-++++k|\na+--++|\n","\n++ea++|\n+l++++|\na+++++|\n++++++|\n+f+++m|\na++++a|\n","\na+++++|\n++++p+|\n++++++|\n+++-++|\n+++-++|\np++--a|\n","\nv+++a+|\n+-++-+|\n++++++|\na+++++|\n++++++|\n+-++-+|\n++++++|\n","\nqa++++|\n++++++|\n++++++|\n++++++|\na+++++|\n++++++|\n+++kna|\n","\na+++++|\n-----+|\n++++++|\n+-----|\no+++++|\n-----+|\na+++++|\n","\na+++++|\n++++++|\n+++p++|\n---+++|\n--++++|\n-++s++|\na+-+++|\n","\n--++++|\n+++--+|\n+--+++|\n++i+a+|\n-++--+|\n++++++|\n1++++-|\n","\na++++a|\n-q++++|\n-+++j-|\n++++--|\n++++f+|\n++-+++|\na++++a|\n","\n--++a-|\n--+++-|\n+l+++-|\n+++++-|\n-++++s|\n-+++++|\n-++++a|\n"],a=[[[4,1]],[[5,4,3,0,1]],[[3],[1]],[[0],[5]],[[3,4,5,2]],[[6,3,4,1]],[[3,6,7,8,5,2,1]],[[8,7],[3,0,1,2]],[[1,4,7],[5,8],[1,4]],[[11,10],[1,5,4,8]],[[8,9,10,6,7,3,2,1,5]],[[6,2,1,0,4,8],[7]],[[5,4,0,1,2,6,10,11,7,3]],[[8,4,0,1],[2,6,10]],[[4,0,1,5,9,13,14,15,11,6]],[[3,7,11,15,14,13,9],[4,5,6]],[[13,9,8,4,5,1,2,3,7,11]],[[2,3,7,11,10,9,5,4,8],[14]],[[6,2,1,0,4,8,12,16,17,18,14,15,11,10,9]],[[1,2,3,7,11,10,6,5,9,13],[8,12]],[[18,19,15,11,10,6,5,1,0,4,8,9,13,17,16]],[[14,10,11,7,6],[2,1,0,4,8,9,13]],[[19,14,13,12,17,16,15,10,5,0,1,6,7,8,9,4]],[[5,6,7,12,13,14,9,4,3,2],[16,15,10]],[[5,6],[3,2,7,12,17,16,15],[19,14,9]],[[15,10,5,6,11],[2,3,4,9,14,13,18]],[[18,17,16,15,10,5],[14,9,8,3],[7,12]],[[5,6,1,2,3,4],[18,17,22,21,20,15,16],[8,9,14]],[[11,10,15,20,21,22,17,18,13,8,7,6,1,2,3,4,9,14,19]],[[1,2,7,12,11,10,15,20],[19,14,9],[22,23,18,13,8,3]],[[19,18,17,22,21,20,15,10,5],[9,4,3,2,7,6,11,12]],[[2,1,0,5,6,11,10],[22,23,24,19,18,13,14,9,8,3]],[[23,22,21,20,15,10,11,6,5,0,1,2,7,12,17,18,19,14,13,8,9,4]],[[0,5,10,11,16,15,20,21,26,27,22,23,28,29,24,19,14,9,8,3,2,7,12,13]],[[3,2,7,8,13],[11,16,17,12],[21,26,27,22,23,18,19,24],[1,6]],[[5,10,11,6,1,2,3,4,9,14,13,8,7,12,17,22,21,20,25,26,27,28,23,24]],[[16,11,6,1,2],[24,29,28,27,26,21,22],[14,13,12,7,8]],[[9,14,19,18,17,22,23,24,29,28,27,26,25,20,15,10,11,6,5,0,1,2,7,8,13,12]],[[29,28,27,22,23,18,19,14,9,4,3,8,7,2,1,6,5,10,11,12,17,16,21,20,25]],[[15,14,13,12,6,7,1,2,3,9,10,11,17,23,22,28,29,35,34,33,32,31,30,24,18,19,25,26]],[[11,5,4,3,9,8,2,1,7,6,12,18,24,25,31,32,33,27,21,15,14],[16,17,23,29,35,34,28]],[[31,32,33,27,21,20,26,25,19],[34,28,22,23,17,16,15,9,10,11,5,4],[1,7,6,12,13,14,8]],[[34,33,32,31,25,24,18,12,6,0,1,7,13,19,20,21,15,9,3,4,10,11,17,23,22,28,27]],[[3,4,5,11,17],[30,31,25,26,32,33,34,35,29,23,22],[21,15,9,8,14,20,19,18,12,13,7,6,0]],[[4,10,9,8,2,1,0,6,7,13,12,18,19,25,24],[21,27,28,29,23,17,16,15,14,20,26,32,33,34,35]],[[4,10,9,15,16,22,28,34,35],[31,25,26,27,21,20,19,13,14,8,7,1,0]],[[6,0,1],[34,33,32,31],[24,18,19,13,14,15,16,10,9,8],[4,5,11,17,23,22,21,20,26,27,28]],[[1,7,6,12,13,14,20,19,18,24,25,26,32,31],[29,28,22,23,17,16,15,9,8,2,3,4,5,11]],[[24,30,36,37,38,32,33,39,40,41,35,29,28,27,26,25,19,13,12,6],[5,11,17,23,22,16,15,21,20,14,8,9,3,2,1]],[[35,29,23,17,11,5,4,10,16,22,28,34],[2,3,9,8,14,15,21,27,33],[30,36,37,38,32,31,25,26,20,19,18,12,13,7,6]],[[1,2,3,4,5,11,17,16,15,14,13,12,18],[37,38,39,40,41,35,29,28,27,26,25]],[[6,12,13,14,8,7,1,2,3,4,5,11,10,9],[37,31,32,26,27,21,22,16,17,23,29,28,34,35,41,40,39]],[[23,29,35,34,33,32,26,20,21,15,16,17,11,5,4,3,2,8,7,6,12,18,19,25,31,30,36,37,38,39,40]],[[40,34,35,29],[30,31,37,38,39,33,27,21,20,26,25,24,18,19,13,7],[11,10,4,3,9,8,14,15],[1,2]],[[35,34,40,39,38,37,31,32,33,27,21,15,9,10,16,22,28],[3,2,8,14,20,26,25,19,18,12]]],i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()}};vkBridge.send("VKWebAppInit");const o=document.querySelector("canvas");o.getContext("2d");const s=640/360;o.width=360,o.height=640;let c=1;const r=document.querySelector(".wrapper"),d=document.querySelectorAll(".screen"),l=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),u=(document.querySelector(".screen--end"),document.querySelector(".play")),m=document.querySelector(".group"),h=document.querySelector(".post"),f=document.querySelector(".invite"),g=document.querySelector(".volume"),v=document.querySelector(".home"),p=document.querySelector(".lvl"),y=document.querySelector(".back"),L=document.querySelector(".hint"),w=document.querySelector(".preloader");let x=!0;w.classList.add("hidden");const S=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3"];let k,b,E,q,A,C,B,j,W,$,T=0,O=!1,H=[];function _(n){H=[],B=n>=55?Math.floor(35*Math.random()+20):n,p.textContent=n+1;const e=t[B].replace(/\r?\n/g,"").trim();let a=0;for(let n of e)"|"===n&&a++;const o=e.indexOf("|");let s;switch(o){case 3:s=40;break;case 4:s=30;break;case 5:s=20;break;case 6:s=16}let c=`<div class="grid" style="--columns:${o};--rows:${a};--width:340px;--height:${340/o*a}px;--size:${s}px">\n`;for(let n of e)if("|"!==n){let e="",t="";"+"!==n&&"-"!==n?(n=S.indexOf(n)+1,e=n,t=1===n?"start active":"end"):"-"===n&&(t="hidden"),c=c.concat(`<div class="grid__item ${t}">${e}</div>\n`)}c=c.concat("</div>"),l.insertAdjacentHTML("afterbegin",c),k=document.querySelector(".grid"),b=document.querySelectorAll(".grid__item"),E=document.querySelectorAll(".grid__item.start"),q=1,A=0,b.forEach((n=>{n.classList.contains("hidden")||A++})),i.any()?E.forEach((n=>{n.addEventListener("touchstart",(()=>{C=[n],document.addEventListener("touchmove",P),document.addEventListener("touchend",I)}))})):E.forEach((n=>{n.addEventListener("mousedown",(()=>{C=[n],document.addEventListener("mousemove",P),document.addEventListener("mouseup",I)}))}))}_(T),K(l),document.addEventListener("click",(n=>{const t=n.target;if(t===u)K(l);else if(t===m)vkBridge.send("VKWebAppJoinGroup",{group_id:213140436});else if(t===h){let n=10;vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой уровень в игре Game - ${n}! Сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйся!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appID"})}else if(t===f)vkBridge.send("VKWebAppShowInviteBox");else if(t===y)H.length&&(H[H.length-1].forEach((n=>{n.classList.remove("active","completed","top","left","right","bottom"),n.classList.contains("start")&&n.classList.add("active"),n.classList.contains("start")||n.classList.contains("end")||(n.textContent="")})),H.splice(H.length-1,1),H.length||y.classList.add("hidden"));else if(t.closest(".hint"))for(let n=0;n<a[B].length;n++){const e=a[B][n];let t=2;for(const a of e){if(b[a].classList.contains("active"))break;b[a].classList.contains("end")||b[a].insertAdjacentHTML("afterbegin",`<span>${t}</span>`),t++,n++}}else t===g&&(x=!x,g.classList.toggle("off"));var i,o;t.closest("button")&&(i=[t.closest("button")],200,o="scale",i.forEach((n=>{n.classList.add(o),setTimeout((()=>{n.classList.remove(o)}),200)})),x&&e.Click.play())}));let M=!0;function P(n){if(!O){if(i.any()){const e=n.touches[0],t=document.elementFromPoint(e.clientX,e.clientY);j=t}else j=n.target;j.closest(".grid")?(j.classList.contains("start")||j.classList.contains("active")||(j.classList.contains("hidden")?I():(W=C[C.length-1].getBoundingClientRect(),$=j.getBoundingClientRect(),$.x<W.x&&$.y>W.y||$.x<W.x&&$.y<W.y||$.x>W.x&&$.y>W.y||$.x>W.x&&$.y<W.y?I():j.classList.contains("end")?j.textContent==q+1?(z(),k.querySelectorAll(".start").length>1&&C.forEach((n=>{n.classList.add("completed")})),k.querySelectorAll(".end.completed").length&&(i.any()?document.removeEventListener("touchmove",P):document.removeEventListener("mousemove",P)),k.querySelectorAll(".start").length>1&&(H.push(C),y.classList.remove("hidden")),setTimeout((()=>{O||confetti({particleCount:50,decay:c/2,ticks:40,spread:360,gravity:0,scalar:c,colors:["#fe5cd7"],origin:{x:($.x+41.25*c)/window.innerWidth,y:($.y+41.25*c)/window.innerHeight}})}),1)):(M&&I(),M=!1):M?C[C.length-1].classList.contains("completed")||(z(),j.textContent=q):I())),j.classList.contains("active")&&(j.classList.contains("completed")?I():q-1==j.textContent?b.forEach((n=>{n.textContent==q&&C.includes(n)&&setTimeout((()=>{q--,M=!0,n.classList.remove("active","top","left","right","bottom"),C.splice(C.indexOf(n),1),n.classList.contains("end")||(n.textContent="")}),1)})):q>j.textContent&&I()),function(){if(k.querySelectorAll(".active").length>=A&&!O){V([v,p,y,L],"add",["hidden"]),x&&e.Confetti.play(),T++,setTimeout((()=>{i.any()?document.removeEventListener("touchmove",P):document.removeEventListener("mousemove",P),V([v,p,L],"remove",["hidden"]),k.remove(),_(T),O=!1}),2e3),O=!0;const n=["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"];confetti({particleCount:100,angle:60,spread:90,gravity:1.5,origin:{x:0,y:.6},colors:n}),confetti({particleCount:100,angle:120,spread:90,gravity:1.5,origin:{x:1,y:.6},colors:n})}}()):I()}}function z(){vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),$.y>W.y&&j.classList.add("top"),$.y<W.y&&j.classList.add("bottom"),$.x>W.x&&j.classList.add("left"),$.x<W.x&&j.classList.add("right"),C.push(j),j.classList.add("active"),q++}function I(){O||(M=!0,q=1,C=[],i.any()?document.removeEventListener("touchmove",P):document.removeEventListener("mousemove",P),b.forEach((n=>{n.classList.contains("completed")||n.classList.remove("active","top","left","right","bottom"),n.classList.contains("start")&&n.classList.add("active"),n.classList.contains("start")||n.classList.contains("end")||n.classList.contains("completed")||(n.textContent="")})))}function K(n){d.forEach((e=>{let t="hidden--left",a="hidden--right";n.classList.contains("hidden--left")&&(t="hidden--right",a="hidden--left"),e.classList.contains("hidden")?e===n&&V([e],"remove",["hidden",a],0):V([e],"add",["hidden",t],0)}))}function V(n,e,t,a=0){setTimeout((()=>{n.forEach((n=>{t.forEach((t=>{"add"===e?n.classList.add(t):n.classList.remove(t)}))}))}),a)}function G(){const n=window.innerHeight/window.innerWidth;s>n?(o.width=window.innerHeight/s,o.height=window.innerHeight,c=window.innerHeight/640,r.style=`--scale:${c}`):(o.width=window.innerWidth,o.height=window.innerWidth*s,c=window.innerWidth/360,r.style=`--scale:${c}`)}G(),window.addEventListener("resize",G)})();