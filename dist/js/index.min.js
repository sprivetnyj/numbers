(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p;const t={Click:new Howl({src:"./audio/click.wav",html5:!0}),Confetti:new Howl({src:"./audio/confetti.wav",html5:!0}),End:new Howl({src:"./audio/end.wav",html5:!0}),Tap1:new Howl({src:"./audio/tap_1.wav",html5:!0}),Tap2:new Howl({src:"./audio/tap_2.wav",html5:!0}),Tap3:new Howl({src:"./audio/tap_3.wav",html5:!0}),Tap4:new Howl({src:"./audio/tap_4.wav",html5:!0}),Tap5:new Howl({src:"./audio/tap_5.wav",html5:!0}),Tap6:new Howl({src:"./audio/tap_6.wav",html5:!0}),Tap7:new Howl({src:"./audio/tap_7.wav",html5:!0}),Tap8:new Howl({src:"./audio/tap_8.wav",html5:!0})},n=["\n++a|\nf++|\n\t","\n-a+|\na+c|\n\t","\n++i|\n+a+|\n+d+|\n\t","\n++a|\n+ea|\n+++|\n\t","\n-++|\nhad|\n+++|\n\t","\n+a+e|\n+-+-|\n+e+a|\n","\n++++|\nf+l+|\n++++|\n+ap+|\n"],i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()}};vkBridge.send("VKWebAppInit");const o=document.querySelector("canvas");o.getContext("2d");const c=640/360;o.width=360,o.height=640;let s=1;const a=document.querySelector(".wrapper"),r=document.querySelectorAll(".screen"),d=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),l=(document.querySelector(".screen--end"),document.querySelector(".play")),u=document.querySelector(".group"),m=document.querySelector(".post"),p=document.querySelector(".invite"),h=document.querySelector(".volume"),v=document.querySelector(".home"),g=document.querySelector(".restart"),f=document.querySelector(".lvl span"),w=document.querySelector(".preloader");let y=!0;w.classList.add("hidden");const L=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];let x,E,S,b,A,k,q,T,B,C=0,H=!1;function W(e){f.textContent=e+1;const t=n[e].replace(/\r?\n/g,"").trim();let o=0;for(let e of t)"|"===e&&o++;const c=t.indexOf("|");let s;switch(c){case 3:s=40;break;case 4:s=30;break;case 5:s=20}let a=`<div class="grid" style="--columns:${c};--rows:${o};--width:340px;--height:${340/c*o}px;--size:${s}px">\n`;for(let e of t)if("|"!==e){let t="",n="";"+"!==e&&"-"!==e?(e=L.indexOf(e)+1,t=e,n=1===e?"start active":"end"):"-"===e&&(n="hidden"),a=a.concat(`<div class="grid__item ${n}">${t}</div>\n`)}a=a.concat("</div>"),d.insertAdjacentHTML("afterbegin",a),x=document.querySelector(".grid"),E=document.querySelectorAll(".grid__item"),S=document.querySelectorAll(".grid__item.start"),b=1,A=0,E.forEach((e=>{e.classList.contains("hidden")||A++})),i.any()?S.forEach((e=>{e.addEventListener("touchstart",(()=>{k=[e],document.addEventListener("touchmove",O),document.addEventListener("touchend",I)}))})):S.forEach((e=>{e.addEventListener("mousedown",(()=>{k=[e],document.addEventListener("mousemove",O),document.addEventListener("mouseup",I)}))}))}W(C),K(d),document.addEventListener("click",(e=>{const n=e.target;if(n===l)K(d);else if(n===u)vkBridge.send("VKWebAppJoinGroup",{group_id:213140436});else if(n===m){let e=10;vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой уровень в игре Game - ${e}! Сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйся!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appID"})}else n===p?vkBridge.send("VKWebAppShowInviteBox"):n===g?(x.remove(),W(C)):n===h&&(y=!y,h.classList.toggle("off"));var i,o;n.closest("button")&&(i=[n.closest("button")],200,o="scale",i.forEach((e=>{e.classList.add(o),setTimeout((()=>{e.classList.remove(o)}),200)})),y&&t.Click.play())}));let _=!0;function O(e){if(!H){if(i.any()){const t=e.touches[0],n=document.elementFromPoint(t.clientX,t.clientY);q=n}else q=e.target;if(q.closest(".grid")){if(q.classList.contains("start")||q.classList.contains("active")||(q.classList.contains("hidden")?I():(T=k[k.length-1].getBoundingClientRect(),B=q.getBoundingClientRect(),B.x<T.x&&B.y>T.y||B.x<T.x&&B.y<T.y||B.x>T.x&&B.y>T.y||B.x>T.x&&B.y<T.y?I():q.classList.contains("end")?q.textContent==b+1?($(),x.querySelectorAll(".start").length>1&&k.forEach((e=>{e.classList.add("completed")})),x.querySelectorAll(".end.completed").length&&(i.any()?document.removeEventListener("touchmove",O):document.removeEventListener("mousemove",O)),setTimeout((()=>{H||confetti({particleCount:50,decay:s/1.5,ticks:40,spread:360,gravity:0,scalar:s,colors:["#fe5cd7"],origin:{x:(B.x+41.25*s)/window.innerWidth,y:(B.y+41.25*s)/window.innerHeight}})}),1)):(_&&I(),_=!1):_?k[k.length-1].classList.contains("completed")||($(),q.textContent=b):I())),q.classList.contains("active")&&(b-1==q.textContent?(q.classList.contains("end")?vkBridge.send("VKWebAppTapticImpactOccurred",{style:"heavy"}):vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),E.forEach((e=>{e.textContent==b&&k.includes(e)&&setTimeout((()=>{b--,_=!0,e.classList.remove("active","top","left","right","bottom"),k.splice(k.indexOf(e),1),e.classList.contains("end")||(e.textContent="")}),1)}))):b>q.textContent&&I()),x.querySelectorAll(".active").length>=A&&!H){V([v,g],"add",["hidden"]),y&&t.Confetti.play(),C++,setTimeout((()=>{i.any()?document.removeEventListener("touchmove",O):document.removeEventListener("mousemove",O),V([v,g],"remove",["hidden"]),x.remove(),W(C),H=!1}),2e3),H=!0;const e=["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"];confetti({particleCount:100,angle:60,spread:90,gravity:1.5,origin:{x:0,y:.6},colors:e}),confetti({particleCount:100,angle:120,spread:90,gravity:1.5,origin:{x:1,y:.6},colors:e})}}else I()}}function $(){q.classList.contains("end")?vkBridge.send("VKWebAppTapticImpactOccurred",{style:"heavy"}):vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),B.y>T.y&&q.classList.add("top"),B.y<T.y&&q.classList.add("bottom"),B.x>T.x&&q.classList.add("left"),B.x<T.x&&q.classList.add("right"),k.push(q),q.classList.add("active"),b++}function I(){H||(_=!0,b=1,k=[],i.any()?document.removeEventListener("touchmove",O):document.removeEventListener("mousemove",O),E.forEach((e=>{e.classList.contains("completed")||e.classList.remove("active","top","left","right","bottom"),e.classList.contains("start")&&e.classList.add("active"),e.classList.contains("start")||e.classList.contains("end")||e.classList.contains("completed")||(e.textContent="")})))}function K(e){r.forEach((t=>{let n="hidden--left",i="hidden--right";e.classList.contains("hidden--left")&&(n="hidden--right",i="hidden--left"),t.classList.contains("hidden")?t===e&&V([t],"remove",["hidden",i],0):V([t],"add",["hidden",n],0)}))}function V(e,t,n,i=0){setTimeout((()=>{e.forEach((e=>{n.forEach((n=>{"add"===t?e.classList.add(n):e.classList.remove(n)}))}))}),i)}function P(){const e=window.innerHeight/window.innerWidth;c>e?(o.width=window.innerHeight/c,o.height=window.innerHeight,s=window.innerHeight/640,a.style=`--scale:${s}`):(o.width=window.innerWidth,o.height=window.innerWidth*c,s=window.innerWidth/360,a.style=`--scale:${s}`)}P(),window.addEventListener("resize",P)})();