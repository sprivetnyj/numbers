(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");o.length&&(t=o[o.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p;const t={Click:new Howl({src:"./audio/click.wav",html5:!0}),Confetti:new Howl({src:"./audio/confetti.wav",html5:!0}),End:new Howl({src:"./audio/end.wav",html5:!0}),Tap1:new Howl({src:"./audio/tap_1.wav",html5:!0}),Tap2:new Howl({src:"./audio/tap_2.wav",html5:!0}),Tap3:new Howl({src:"./audio/tap_3.wav",html5:!0}),Tap4:new Howl({src:"./audio/tap_4.wav",html5:!0}),Tap5:new Howl({src:"./audio/tap_5.wav",html5:!0}),Tap6:new Howl({src:"./audio/tap_6.wav",html5:!0}),Tap7:new Howl({src:"./audio/tap_7.wav",html5:!0}),Tap8:new Howl({src:"./audio/tap_8.wav",html5:!0})},n=["\n++a|\nf++|\n\t","\n-a+|\na+c|\n\t","\n++i|\n+a+|\n+d+|\n\t","\n++a|\n+ea|\n+++|\n\t","\n-++|\nhad|\n+++|\n\t","\n+a+e|\n+-+-|\n+e+a|\n","\n++++|\nf+l+|\n++++|\n+ap+|\n"],o={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.Android()||o.BlackBerry()||o.iOS()||o.Opera()||o.Windows()}};vkBridge.send("VKWebAppInit");const i=document.querySelector("canvas");i.getContext("2d");const s=640/360;i.width=360,i.height=640;let c=1;const r=document.querySelector(".wrapper"),a=document.querySelectorAll(".screen"),d=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),l=(document.querySelector(".screen--end"),document.querySelector(".play")),u=document.querySelector(".group"),m=document.querySelector(".post"),h=document.querySelector(".invite"),p=document.querySelector(".volume"),v=document.querySelector(".home"),f=document.querySelector(".restart"),g=document.querySelector(".lvl span"),w=document.querySelector(".preloader");let y=!0;w.classList.add("hidden");const L=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];let x,E,S,b,q,A,T,k,C,H,B=0,_=!1;function W(e){T=0,g.textContent=e+1;const t=n[e].replace(/\r?\n/g,"").trim();let i=0;for(let e of t)"|"===e&&i++;const s=t.indexOf("|");let c;switch(s){case 3:c=40;break;case 4:c=30;break;case 5:c=20}let r=`<div class="grid" style="--columns:${s};--rows:${i};--width:340px;--height:${340/s*i}px;--size:${c}px">\n`;for(let e of t)if("|"!==e){let t="",n="";"+"!==e&&"-"!==e?(e=L.indexOf(e)+1,t=e,n=1===e?"start active":"end"):"-"===e&&(n="hidden"),r=r.concat(`<div class="grid__item ${n}">${t}</div>\n`)}r=r.concat("</div>"),d.insertAdjacentHTML("afterbegin",r),x=document.querySelector(".grid"),E=document.querySelectorAll(".grid__item"),S=document.querySelectorAll(".grid__item.start"),b=1,q=0,E.forEach((e=>{e.classList.contains("hidden")||q++})),o.any()?S.forEach((e=>{e.addEventListener("touchstart",(()=>{A=[e],document.addEventListener("touchmove",O),document.addEventListener("touchend",I)}))})):S.forEach((e=>{e.addEventListener("mousedown",(()=>{A=[e],document.addEventListener("mousemove",O),document.addEventListener("mouseup",I)}))}))}W(B),K(d),document.addEventListener("click",(e=>{const n=e.target;if(n===l)K(d);else if(n===u)vkBridge.send("VKWebAppJoinGroup",{group_id:213140436});else if(n===m){let e=10;vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой уровень в игре Game - ${e}! Сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйся!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appID"})}else n===h?vkBridge.send("VKWebAppShowInviteBox"):n===f?(x.remove(),W(B)):n===p&&(y=!y,p.classList.toggle("off"));var o,i;n.closest("button")&&(o=[n.closest("button")],200,i="scale",o.forEach((e=>{e.classList.add(i),setTimeout((()=>{e.classList.remove(i)}),200)})),y&&t.Click.play())}));let $=!0;function O(e){if(!_){if(o.any()){const t=e.touches[0],n=document.elementFromPoint(t.clientX,t.clientY);k=n}else k=e.target;if(k.closest(".grid")){if(k.classList.contains("start")||k.classList.contains("active")||(k.classList.contains("hidden")?I():(C=A[A.length-1].getBoundingClientRect(),H=k.getBoundingClientRect(),H.x<C.x&&H.y>C.y||H.x<C.x&&H.y<C.y||H.x>C.x&&H.y>C.y||H.x>C.x&&H.y<C.y?I():k.classList.contains("end")?k.textContent==b+1?(P(),x.querySelectorAll(".start").length>1&&A.forEach((e=>{e.classList.add("completed")})),x.querySelectorAll(".end.completed").length&&(o.any()?document.removeEventListener("touchmove",O):document.removeEventListener("mousemove",O)),setTimeout((()=>{_||confetti({particleCount:50,decay:c/1.5,ticks:40,spread:360,gravity:0,scalar:c,colors:["#fe5cd7"],origin:{x:(H.x+41.25*c)/window.innerWidth,y:(H.y+41.25*c)/window.innerHeight}})}),1)):($&&A.forEach((e=>{e.classList.add("error","delay"),setTimeout((()=>{e.classList.remove("error")}),200),setTimeout((()=>{e.classList.remove("delay")}),400)})),$=!1):$?A[A.length-1].classList.contains("completed")||(P(),k.textContent=b):I())),k.classList.contains("active")&&(b-1==k.textContent?(y&&T>0&&T--,E.forEach((e=>{e.textContent==b&&A.includes(e)&&setTimeout((()=>{b--,$=!0,e.classList.remove("active","top","left","right","bottom"),A.splice(A.indexOf(e),1),e.classList.contains("end")||(e.textContent="")}),1)}))):b>k.textContent&&I()),x.querySelectorAll(".active").length>=q&&!_){V([v,f],"add",["hidden"]),y&&t.Confetti.play(),B++,setTimeout((()=>{o.any()?document.removeEventListener("touchmove",O):document.removeEventListener("mousemove",O),V([v,f],"remove",["hidden"]),x.remove(),W(B),_=!1}),2e3),_=!0;const e=["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"];confetti({particleCount:100,angle:60,spread:90,gravity:1.5,origin:{x:0,y:.6},colors:e}),confetti({particleCount:100,angle:120,spread:90,gravity:1.5,origin:{x:1,y:.6},colors:e})}}else I()}}function P(){vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),y&&T<9&&T++,H.y>C.y&&k.classList.add("top"),H.y<C.y&&k.classList.add("bottom"),H.x>C.x&&k.classList.add("left"),H.x<C.x&&k.classList.add("right"),A.push(k),k.classList.add("active"),b++}function I(){_||(T=0,$=!0,b=1,A.forEach((e=>{e.classList.remove("error")})),A=[],o.any()?document.removeEventListener("touchmove",O):document.removeEventListener("mousemove",O),E.forEach((e=>{e.classList.contains("completed")||e.classList.remove("active","top","left","right","bottom"),e.classList.contains("start")&&e.classList.add("active"),e.classList.contains("start")||e.classList.contains("end")||e.classList.contains("completed")||(e.textContent="")})))}function K(e){a.forEach((t=>{let n="hidden--left",o="hidden--right";e.classList.contains("hidden--left")&&(n="hidden--right",o="hidden--left"),t.classList.contains("hidden")?t===e&&V([t],"remove",["hidden",o],0):V([t],"add",["hidden",n],0)}))}function V(e,t,n,o=0){setTimeout((()=>{e.forEach((e=>{n.forEach((n=>{"add"===t?e.classList.add(n):e.classList.remove(n)}))}))}),o)}function j(){const e=window.innerHeight/window.innerWidth;s>e?(i.width=window.innerHeight/s,i.height=window.innerHeight,c=window.innerHeight/640,r.style=`--scale:${c}`):(i.width=window.innerWidth,i.height=window.innerWidth*s,c=window.innerWidth/360,r.style=`--scale:${c}`)}j(),window.addEventListener("resize",j)})();