(()=>{"use strict";var n={};n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.p,n.p;const e={Click:new Howl({src:"./audio/click.wav",html5:!0}),Confetti:new Howl({src:"./audio/confetti.wav",html5:!0})},t=["\n-+d|\na+-|\n","\n++a|\nd++|\n","\nc+a|\n+a-|\n","\n+ac|\nca+|\n","\naf+|\n+c+|\n","\n-+f|\n++-|\n+a-|\n","\n+++|\n+da|\na++|\n","\na++|\n+if|\n+++|\n","\na+a|\n-++|\ne++|\n","\n-+a-|\n++-a|\n+d++|\n","\n-+++|\na+e+|\n+++-|\n","\n+++a|\n+-++|\n+ha-|\n","\n+++a|\n+f+-|\n+a+e|\n","\n+e++|\n+++j|\n-a++|\n","\n++m-|\n+++k|\na+-+|\n-+++|\n","\na-a+|\n++++|\ni+-+|\n-+++|\n","\n-+++|\n+f-+|\n++l+|\na+--|\n","\n-a++|\n++-+|\n++++|\nk-+a|\n","\n+++-|\n+a+-|\n++++|\n+-++|\n+j+-|\n","\na+++|\n-+++|\n++++|\n++l-|\na---|\n","\n+++a|\n+g++|\n++++|\n-++-|\n-ia-|\n","\nj+--|\n+h+-|\n++++|\n-+a+|\n++++|\n","\n++-r+|\n+++++|\n+-+++|\n+++a+|\n","\nal+++|\n+++-+|\n+-+++|\n++a--|\n","\na-++-|\n+++a+|\n-d+-+|\nh++a+|\n","\n--+++|\n++a-+|\n++g++|\n+ai+-|\n","\nh-f+-|\n+a+++|\n+-+a+|\n++++a|\n","\n-+++g|\n++a++|\nai-a+|\n++++-|\n+++--|\n","\n-++++|\n-++k+|\n++a++|\n+-+++|\ne++-u|\n","\na+++e|\n--+++|\n+++++|\n+-a++|\n+j++a|\n","\nk-+++|\n+++-+|\n+++ja|\n+-+++|\n+++-a|\n","\n++++l|\n++a++|\nh+-++|\n--a++|\n--+++|\n","\n+++x+|\n+++++|\n+h+++|\n+-+++|\n++++a|\n","\n+a++-|\n+-+++|\n+++++|\n++-z+|\n+++++|\n-++++|\n","\na+++a|\n-+++-|\na+e+g|\n-++++|\na++++|\n-++-j|\n","\na++++|\n++++j|\n+++++|\n--p--|\n+++++|\n++++z|\n","\n-++g-|\n-++f-|\n-++++|\na+i-a|\n-++a+|\n-++++|\n","\n+++-a|\n+++y+|\n+++++|\n+-f++|\n+-+++|\nn++++|\n","\n-++++|\n+++++|\n++u-+|\n-++++|\n++++a|\n+-+++|\n","\n-+++--|\n++-+++|\n++++-+|\n++-a++|\n+++3++|\n++++++|\n","\n-+++++|\n++++a+|\n+-++++|\n+-w+a+|\n++-+++|\n-+++++|\n","\na+-n++|\n++++++|\n++++++|\nk+++++|\n-++++-|\na++++a|\n","\n++-++-|\nj+-+++|\n++-+-+|\n++++++|\n++2++-|\n-++++a|\n","\n+oa+++|\n++++-+|\n++++g+|\n++++++|\na++am+|\n++++++|\n","\n+++-+a|\n+++++-|\n++++++|\n++++a+|\n++++++|\nq-++++|\n","\n++--+a|\no++++-|\n-++++-|\n-++++-|\n-++++k|\na+--++|\n","\n++ea++|\n+l++++|\na+++++|\n++++++|\n+f+++m|\na++++a|\n","\na+++++|\n++++p+|\n++++++|\n+++-++|\n+++-++|\np++--a|\n","\nv+++a+|\n+-++-+|\n++++++|\na+++++|\n++++++|\n+-++-+|\n++++++|\n","\nqa++++|\n++++++|\n++++++|\n++++++|\na+++++|\n++++++|\n+++kna|\n","\na+++++|\n-----+|\n++++++|\n+-----|\no+++++|\n-----+|\na+++++|\n","\na+++++|\n++++++|\n+++p++|\n---+++|\n--++++|\n-++s++|\na+-+++|\n","\n--++++|\n+++--+|\n+--+++|\n++i+a+|\n-++--+|\n++++++|\n1++++-|\n","\na++++a|\n-q++++|\n-+++j-|\n++++--|\n++++f+|\n++-+++|\na++++a|\n","\n--++a-|\n--+++-|\n+l+++-|\n+++++-|\n-++++s|\n-+++++|\n-++++a|\n"],a=[[[4,1]],[[5,4,3,0,1]],[[3],[1]],[[0],[5]],[[3,4,5,2]],[[6,3,4,1]],[[8,7],[3,0,1,2]],[[3,6,7,8,5,2,1]],[[1,4,7],[5,8],[1,4]],[[11,10],[1,5,4,8]],[[8,9,10,6,7,3,2,1,5]],[[6,2,1,0,4,8],[7]],[[8,4,0,1],[2,6,10]],[[5,4,0,1,2,6,10,11,7,3]],[[4,0,1,5,9,13,14,15,11,6]],[[3,7,11,15,14,13,9],[4,5,6]],[[13,9,8,4,5,1,2,3,7,11]],[[2,3,7,11,10,9,5,4,8],[14]],[[6,2,1,0,4,8,12,16,17,18,14,15,11,10,9]],[[1,2,3,7,11,10,6,5,9,13],[8,12]],[[14,10,11,7,6],[2,1,0,4,8,9,13]],[[18,19,15,11,10,6,5,1,0,4,8,9,13,17,16]],[[19,14,13,12,17,16,15,10,5,0,1,6,7,8,9,4]],[[5,6,7,12,13,14,9,4,3,2],[16,15,10]],[[5,6],[3,2,7,12,17,16,15],[19,14,9]],[[15,10,5,6,11],[2,3,4,9,14,13,18]],[[18,17,16,15,10,5],[14,9,8,3],[7,12]],[[5,6,1,2,3,4],[18,17,22,21,20,15,16],[8,9,14]],[[11,10,15,20,21,22,17,18,13,8,7,6,1,2,3,4,9,14,19]],[[1,2,7,12,11,10,15,20],[19,14,9],[22,23,18,13,8,3]],[[19,18,17,22,21,20,15,10,5],[9,4,3,2,7,6,11,12]],[[2,1,0,5,6,11,10],[22,23,24,19,18,13,14,9,8,3]],[[23,22,21,20,15,10,11,6,5,0,1,2,7,12,17,18,19,14,13,8,9,4]],[[0,5,10,11,16,15,20,21,26,27,22,23,28,29,24,19,14,9,8,3,2,7,12,13]],[[3,2,7,8,13],[11,16,17,12],[21,26,27,22,23,18,19,24],[1,6]],[[5,10,11,6,1,2,3,4,9,14,13,8,7,12,17,22,21,20,25,26,27,28,23,24]],[[16,11,6,1,2],[24,29,28,27,26,21,22],[14,13,12,7,8]],[[9,14,19,18,17,22,23,24,29,28,27,26,25,20,15,10,11,6,5,0,1,2,7,8,13,12]],[[29,28,27,22,23,18,19,14,9,4,3,8,7,2,1,6,5,10,11,12,17,16,21,20,25]],[[15,14,13,12,6,7,1,2,3,9,10,11,17,23,22,28,29,35,34,33,32,31,30,24,18,19,25,26]],[[11,5,4,3,9,8,2,1,7,6,12,18,24,25,31,32,33,27,21,15,14],[16,17,23,29,35,34,28]],[[31,32,33,27,21,20,26,25,19],[34,28,22,23,17,16,15,9,10,11,5,4],[1,7,6,12,13,14,8]],[[34,33,32,31,25,24,18,12,6,0,1,7,13,19,20,21,15,9,3,4,10,11,17,23,22,28,27]],[[3,4,5,11,17],[30,31,25,26,32,33,34,35,29,23,22],[21,15,9,8,14,20,19,18,12,13,7,6,0]],[[4,10,9,8,2,1,0,6,7,13,12,18,19,25,24],[21,27,28,29,23,17,16,15,14,20,26,32,33,34,35]],[[4,10,9,15,16,22,28,34,35],[31,25,26,27,21,20,19,13,14,8,7,1,0]],[[6,0,1],[34,33,32,31],[24,18,19,13,14,15,16,10,9,8],[4,5,11,17,23,22,21,20,26,27,28]],[[1,7,6,12,13,14,20,19,18,24,25,26,32,31],[29,28,22,23,17,16,15,9,8,2,3,4,5,11]],[[24,30,36,37,38,32,33,39,40,41,35,29,28,27,26,25,19,13,12,6],[5,11,17,23,22,16,15,21,20,14,8,9,3,2,1]],[[35,29,23,17,11,5,4,10,16,22,28,34],[2,3,9,8,14,15,21,27,33],[30,36,37,38,32,31,25,26,20,19,18,12,13,7,6]],[[1,2,3,4,5,11,17,16,15,14,13,12,18],[37,38,39,40,41,35,29,28,27,26,25]],[[6,12,13,14,8,7,1,2,3,4,5,11,10,9],[37,31,32,26,27,21,22,16,17,23,29,28,34,35,41,40,39]],[[23,29,35,34,33,32,26,20,21,15,16,17,11,5,4,3,2,8,7,6,12,18,19,25,31,30,36,37,38,39,40]],[[40,34,35,29],[30,31,37,38,39,33,27,21,20,26,25,24,18,19,13,7],[11,10,4,3,9,8,14,15],[1,2]],[[35,34,40,39,38,37,31,32,33,27,21,15,9,10,16,22,28],[3,2,8,14,20,26,25,19,18,12]]],i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()}};vkBridge.send("VKWebAppInit");const s=document.querySelector("canvas");s.getContext("2d");const o=640/360;s.width=360,s.height=640;let r=1;const c=document.querySelector(".wrapper"),d=document.querySelectorAll(".screen"),l=document.querySelector(".screen--start"),u=document.querySelector(".screen--game"),h=document.querySelector(".play"),m=document.querySelector(".group"),g=document.querySelector(".post"),v=document.querySelector(".invite"),p=document.querySelector(".settings"),f=document.querySelector(".settings-menu"),y=document.querySelector(".close"),k=document.querySelector("#sound"),L=document.querySelector("#vibration"),w=document.querySelector(".home"),S=document.querySelector(".lvl"),b=document.querySelector(".back"),x=document.querySelector(".hint"),A=document.querySelector(".preloader");let K,C,E,B,q=-1;vkBridge.send("VKWebAppStorageGet",{keys:["lvlKey1","helpKey1","soundKey0","vibrationKey0"]}).then((n=>{n.keys[0].value.length||(n.keys[0].value="0"),n.keys[1].value.length||(n.keys[1].value="3"),n.keys[2].value.length||(n.keys[2].value="true"),n.keys[3].value.length||(n.keys[3].value="true"),E=n.keys[0].value,B=n.keys[1].value,S.textContent=Number(E)+1,K=n.keys[2].value,C=n.keys[3].value,k.checked="true"===K,L.checked="true"===C,setTimeout((()=>{A.classList.add("hidden"),F(E),"null"!==B?x.firstElementChild.textContent=B:x.classList.add("show")}),2e3)})),A.classList.add("hidden");const W=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3"];let V,j,$,T,_,O,G,H,M,N,P,z=!1,I=[];function F(n){q++,q>0&&q%3==0&&vkBridge.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((()=>{vkBridge.send("VKWebAppShowNativeAds",{ad_format:"interstitial"})})),I=[],G=n>=55?Math.floor(35*Math.random()+20):n;const e=t[G].replace(/\r?\n/g,"").trim();let a=0;for(let n of e)"|"===n&&a++;const s=e.indexOf("|");let o;switch(s){case 3:o=40;break;case 4:o=30;break;case 5:o=20;break;case 6:o=16}let r=`<div class="grid" style="--columns:${s};--rows:${a};--width:340px;--height:${340/s*a}px;--size:${o}px">\n`;for(let n of e)if("|"!==n){let e="",t="";"+"!==n&&"-"!==n?(n=W.indexOf(n)+1,e=n,t=1===n?"start active":"end"):"-"===n&&(t="hidden"),r=r.concat(`<div class="grid__item ${t}">${e}</div>\n`)}r=r.concat("</div>"),u.insertAdjacentHTML("afterbegin",r),V=document.querySelector(".grid"),j=document.querySelectorAll(".grid__item"),$=document.querySelectorAll(".grid__item.start"),T=1,_=0,j.forEach((n=>{n.classList.contains("hidden")||_++})),i.any()?$.forEach((n=>{n.addEventListener("touchstart",(()=>{O=[n],document.addEventListener("touchmove",J),document.addEventListener("touchend",Y)}))})):$.forEach((n=>{n.addEventListener("mousedown",(()=>{O=[n],document.addEventListener("mousemove",J),document.addEventListener("mouseup",Y)}))}))}document.addEventListener("click",(n=>{const t=n.target;var i,s;if(t.closest("button")&&(i=[t.closest("button")],200,s="scale",i.forEach((n=>{n.classList.add(s),setTimeout((()=>{n.classList.remove(s)}),200)})),"true"===K&&e.Click.play()),t===h)D(u);else if(t===m)vkBridge.send("VKWebAppJoinGroup",{group_id:213140436});else if(t===g){const n=S.textContent;vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой уровень в игре Game - ${n}! Сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйся!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/app8195384"})}else if(t===v)vkBridge.send("VKWebAppShowInviteBox");else if(t===w)D(l);else if(t===p)f.classList.remove("hidden");else if(t===y)f.classList.add("hidden");else if(t===k)K=String(k.checked),"true"===K&&e.Click.play(),vkBridge.send("VKWebAppStorageGet",{keys:["soundKey0"]}).then((()=>{vkBridge.send("VKWebAppStorageSet",{key:"soundKey0",value:K})}));else if(t===L)C=String(L.checked),"true"===K&&e.Click.play(),vkBridge.send("VKWebAppStorageGet",{keys:["vibrationKey0"]}).then((()=>{vkBridge.send("VKWebAppStorageSet",{key:"vibrationKey0",value:C})}));else if(t===b)I.length&&(I[I.length-1].forEach((n=>{n.classList.remove("active","completed","top","left","right","bottom"),n.classList.contains("start")&&n.classList.add("active"),n.classList.contains("start")||n.classList.contains("end")||(n.textContent="")})),I.splice(I.length-1,1),I.length||b.classList.add("hidden"));else if(t.closest(".hint"))if("null"!==B){B--,B<1?(x.classList.add("show"),B="null",H=B):H=String(B),x.firstElementChild.textContent=B,vkBridge.send("VKWebAppStorageGet",{keys:["helpKey1"]}).then((()=>{vkBridge.send("VKWebAppStorageSet",{key:"helpKey1",value:H})}));for(let n=0;n<a[G].length;n++){const e=a[G][n];let t=2;for(const a of e){if(j[a].classList.contains("active"))break;j[a].classList.contains("end")||j[a].insertAdjacentHTML("afterbegin",`<span>${t}</span>`),t++,n++}}}else vkBridge.send("VKWebAppCheckNativeAds",{ad_format:"reward"}).then((()=>{vkBridge.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((()=>{B=3,vkBridge.send("VKWebAppStorageGet",{keys:["helpKey1"]}).then((()=>{vkBridge.send("VKWebAppStorageSet",{key:"helpKey1",value:String(B)})})),Q([x],"remove",["show","error"],0),x.firstElementChild.textContent=B})).catch((()=>{x.classList.add("error"),x.firstElementChild.textContent=B}))}))}));let R=!0;function J(n){if(!z){if(i.any()){const e=n.touches[0],t=document.elementFromPoint(e.clientX,e.clientY);M=t}else M=n.target;M.closest(".grid")?(M.classList.contains("start")||M.classList.contains("active")||(M.classList.contains("hidden")?Y():(N=O[O.length-1].getBoundingClientRect(),P=M.getBoundingClientRect(),P.x<N.x&&P.y>N.y||P.x<N.x&&P.y<N.y||P.x>N.x&&P.y>N.y||P.x>N.x&&P.y<N.y?Y():M.classList.contains("end")?M.textContent==T+1?(X(),V.querySelectorAll(".start").length>1&&O.forEach((n=>{n.classList.add("completed")})),V.querySelectorAll(".end.completed").length&&(i.any()?document.removeEventListener("touchmove",J):document.removeEventListener("mousemove",J)),V.querySelectorAll(".start").length>1&&(I.push(O),b.classList.remove("hidden")),setTimeout((()=>{z||confetti({particleCount:50,decay:r/2,ticks:40,spread:360,gravity:0,scalar:r,colors:["#fe5cd7"],origin:{x:(P.x+41.25*r)/window.innerWidth,y:(P.y+41.25*r)/window.innerHeight}})}),1)):(R&&Y(),R=!1):R?O[O.length-1].classList.contains("completed")||(X(),M.textContent=T):Y())),M.classList.contains("active")&&(M.classList.contains("completed")?Y():T-1==M.textContent?j.forEach((n=>{n.textContent==T&&O.includes(n)&&setTimeout((()=>{T--,R=!0,n.classList.remove("active","top","left","right","bottom"),O.splice(O.indexOf(n),1),n.classList.contains("end")||(n.textContent="")}),1)})):T>M.textContent&&Y()),function(){if(V.querySelectorAll(".active").length>=_&&!z){Q([w,S,b,x],"add",["hidden"]),"true"===K&&e.Confetti.play(),E++,setTimeout((()=>{S.textContent=E+1,vkBridge.send("VKWebAppStorageGet",{keys:["lvlKey1"]}).then((()=>{vkBridge.send("VKWebAppStorageSet",{key:"lvlKey1",value:String(E)})})),i.any()?document.removeEventListener("touchmove",J):document.removeEventListener("mousemove",J),Q([w,S,x],"remove",["hidden"]),V.remove(),F(E),z=!1}),2e3),z=!0;const n=["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"];confetti({particleCount:100,angle:60,spread:90,gravity:1.5,origin:{x:0,y:.6},colors:n}),confetti({particleCount:100,angle:120,spread:90,gravity:1.5,origin:{x:1,y:.6},colors:n})}}()):Y()}}function X(){"true"===C&&vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),P.y>N.y&&M.classList.add("top"),P.y<N.y&&M.classList.add("bottom"),P.x>N.x&&M.classList.add("left"),P.x<N.x&&M.classList.add("right"),O.push(M),M.classList.add("active"),T++}function Y(){z||(R=!0,T=1,O=[],i.any()?document.removeEventListener("touchmove",J):document.removeEventListener("mousemove",J),j.forEach((n=>{n.classList.contains("completed")||n.classList.remove("active","top","left","right","bottom"),n.classList.contains("start")&&n.classList.add("active"),n.classList.contains("start")||n.classList.contains("end")||n.classList.contains("completed")||(n.textContent="")})))}function D(n){d.forEach((e=>{let t="hidden--left",a="hidden--right";n.classList.contains("hidden--left")&&(t="hidden--right",a="hidden--left"),e.classList.contains("hidden")?e===n&&Q([e],"remove",["hidden",a],500):Q([e],"add",["hidden",t],500)}))}function Q(n,e,t,a=0){setTimeout((()=>{n.forEach((n=>{t.forEach((t=>{"add"===e?n.classList.add(t):n.classList.remove(t)}))}))}),a)}function U(){const n=window.innerHeight/window.innerWidth;o>n?(s.width=window.innerHeight/o,s.height=window.innerHeight,r=window.innerHeight/640,c.style=`--scale:${r}`):(s.width=window.innerWidth,s.height=window.innerWidth*o,r=window.innerWidth/360,c.style=`--scale:${r}`)}U(),window.addEventListener("resize",U)})();