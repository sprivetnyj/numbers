(()=>{"use strict";var n={};n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.p,n.p;const e={Click:new Howl({src:"./audio/click.wav",html5:!0}),Confetti:new Howl({src:"./audio/confetti.wav",html5:!0})},t=["\n-+d|\na+-|\n","\n++a|\nd++|\n","\nc+a|\n+a-|\n","\n+ac|\nca+|\n","\naf+|\n+c+|\n","\n-+f|\n++-|\n+a-|\n","\na++|\n+if|\n+++|\n","\n+++|\n+da|\na++|\n","\na+a|\n-++|\ne++|\n","\n-+a-|\n++-a|\n+d++|\n","\n-+++|\na+e+|\n+++-|\n","\n+++a|\n+-++|\n+ha-|\n","\n+e++|\n+++j|\n-a++|\n","\n+++a|\n+f+-|\n+a+e|\n","\n++m-|\n+++g|\na+-+|\n-+++|\n","\na-a+|\n++++|\ni+-+|\n-+++|\n","\n-+++|\n+d-+|\n++j+|\na+--|\n","\n-a++|\n++-+|\n++++|\nk-+a|\n","\n+++-|\n+a+-|\n++++|\n+-++|\n+j+-|\n","\n+++a|\n+g++|\n++++|\n-++-|\n-ia-|\n","\n++-r+|\n+++++|\n+-+++|\n+++a+|\n","\nal+++|\n+++-+|\n+-+++|\n++a--|\n","\na-++-|\n+++a+|\n-d+-+|\nh++a+|\n","\n--+++|\n++a-+|\n++g++|\n+ai+-|\n","\nh-f+-|\n+a+++|\n+-+a+|\n++++a|\n","\n-+++g|\n++a++|\nai-a+|\n++++-|\n+++--|\n","\n-++++|\n-++k+|\n++a++|\n+-+++|\ne++-u|\n","\na+++e|\n--+++|\n+++++|\n+-a++|\n+j++a|\n","\nk-+++|\n+++-+|\n+++ja|\n+-+++|\n+++-a|\n","\n++++l|\n++a++|\nh+-++|\n--a++|\n--+++|\n","\n+++x+|\n+++++|\n+h+++|\n+-+++|\n++++a|\n","\n+a++-|\n+-+++|\n+++++|\n++-z+|\n+++++|\n-++++|\n","\na+++a|\n-+++-|\na+e+g|\n-++++|\na++++|\n-++-j|\n","\na++++|\n++++j|\n+++++|\n--p--|\n+++++|\n++++z|\n","\n-++g-|\n-++f-|\n-++++|\na+i-a|\n-++a+|\n-++++|\n","\n+++-a|\n+++y+|\n+++++|\n+-f++|\n+-+++|\nn++++|\n"],i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()}};vkBridge.send("VKWebAppInit");const o=document.querySelector("canvas");o.getContext("2d");const a=640/360;o.width=360,o.height=640;let c=1;const s=document.querySelector(".wrapper"),r=document.querySelectorAll(".screen"),d=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),l=(document.querySelector(".screen--end"),document.querySelector(".play")),u=document.querySelector(".group"),m=document.querySelector(".post"),h=document.querySelector(".invite"),f=document.querySelector(".volume"),g=document.querySelector(".home"),v=document.querySelector(".restart"),p=document.querySelector(".lvl span"),y=document.querySelector(".preloader");let w=!0;y.classList.add("hidden");const L=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];let x,S,E,b,k,q,A,C,B,W=0,$=!1;function j(n){p.textContent=n+1;const e=t[n].replace(/\r?\n/g,"").trim();let o=0;for(let n of e)"|"===n&&o++;const a=e.indexOf("|");let c;switch(a){case 3:c=40;break;case 4:c=30;break;case 5:c=20}let s=`<div class="grid" style="--columns:${a};--rows:${o};--width:340px;--height:${340/a*o}px;--size:${c}px">\n`;for(let n of e)if("|"!==n){let e="",t="";"+"!==n&&"-"!==n?(n=L.indexOf(n)+1,e=n,t=1===n?"start active":"end"):"-"===n&&(t="hidden"),s=s.concat(`<div class="grid__item ${t}">${e}</div>\n`)}s=s.concat("</div>"),d.insertAdjacentHTML("afterbegin",s),x=document.querySelector(".grid"),S=document.querySelectorAll(".grid__item"),E=document.querySelectorAll(".grid__item.start"),b=1,k=0,S.forEach((n=>{n.classList.contains("hidden")||k++})),i.any()?E.forEach((n=>{n.addEventListener("touchstart",(()=>{q=[n],document.addEventListener("touchmove",T),document.addEventListener("touchend",_)}))})):E.forEach((n=>{n.addEventListener("mousedown",(()=>{q=[n],document.addEventListener("mousemove",T),document.addEventListener("mouseup",_)}))}))}j(W),P(d),document.addEventListener("click",(n=>{const t=n.target;if(t===l)P(d);else if(t===u)vkBridge.send("VKWebAppJoinGroup",{group_id:213140436});else if(t===m){let n=10;vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой уровень в игре Game - ${n}! Сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйся!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appID"})}else t===h?vkBridge.send("VKWebAppShowInviteBox"):t===v?(x.remove(),j(W)):t===f&&(w=!w,f.classList.toggle("off"));var i,o;t.closest("button")&&(i=[t.closest("button")],200,o="scale",i.forEach((n=>{n.classList.add(o),setTimeout((()=>{n.classList.remove(o)}),200)})),w&&e.Click.play())}));let O=!0;function T(n){if(!$){if(i.any()){const e=n.touches[0],t=document.elementFromPoint(e.clientX,e.clientY);A=t}else A=n.target;if(A.closest(".grid")){if(A.classList.contains("start")||A.classList.contains("active")||(A.classList.contains("hidden")?_():(C=q[q.length-1].getBoundingClientRect(),B=A.getBoundingClientRect(),B.x<C.x&&B.y>C.y||B.x<C.x&&B.y<C.y||B.x>C.x&&B.y>C.y||B.x>C.x&&B.y<C.y?_():A.classList.contains("end")?A.textContent==b+1?(H(),x.querySelectorAll(".start").length>1&&q.forEach((n=>{n.classList.add("completed")})),x.querySelectorAll(".end.completed").length&&(i.any()?document.removeEventListener("touchmove",T):document.removeEventListener("mousemove",T)),setTimeout((()=>{$||(console.log(!0),confetti({particleCount:50,decay:c/2,ticks:40,spread:360,gravity:0,scalar:c,colors:["#fe5cd7"],origin:{x:(B.x+41.25*c)/window.innerWidth,y:(B.y+41.25*c)/window.innerHeight}}))}),1)):(O&&_(),O=!1):O?q[q.length-1].classList.contains("completed")||(H(),A.textContent=b):_())),A.classList.contains("active")&&(A.classList.contains("completed")?_():b-1==A.textContent?S.forEach((n=>{n.textContent==b&&q.includes(n)&&setTimeout((()=>{b--,O=!0,n.classList.remove("active","top","left","right","bottom"),q.splice(q.indexOf(n),1),n.classList.contains("end")||(n.textContent="")}),1)})):b>A.textContent&&_()),x.querySelectorAll(".active").length>=k&&!$){z([g,v],"add",["hidden"]),w&&e.Confetti.play(),W++,W<36&&setTimeout((()=>{i.any()?document.removeEventListener("touchmove",T):document.removeEventListener("mousemove",T),z([g,v],"remove",["hidden"]),x.remove(),j(W),$=!1}),2e3),$=!0;const n=["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"];confetti({particleCount:100,angle:60,spread:90,gravity:1.5,origin:{x:0,y:.6},colors:n}),confetti({particleCount:100,angle:120,spread:90,gravity:1.5,origin:{x:1,y:.6},colors:n})}}else _()}}function H(){vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),B.y>C.y&&A.classList.add("top"),B.y<C.y&&A.classList.add("bottom"),B.x>C.x&&A.classList.add("left"),B.x<C.x&&A.classList.add("right"),q.push(A),A.classList.add("active"),b++}function _(){$||(O=!0,b=1,q=[],i.any()?document.removeEventListener("touchmove",T):document.removeEventListener("mousemove",T),S.forEach((n=>{n.classList.contains("completed")||n.classList.remove("active","top","left","right","bottom"),n.classList.contains("start")&&n.classList.add("active"),n.classList.contains("start")||n.classList.contains("end")||n.classList.contains("completed")||(n.textContent="")})))}function P(n){r.forEach((e=>{let t="hidden--left",i="hidden--right";n.classList.contains("hidden--left")&&(t="hidden--right",i="hidden--left"),e.classList.contains("hidden")?e===n&&z([e],"remove",["hidden",i],0):z([e],"add",["hidden",t],0)}))}function z(n,e,t,i=0){setTimeout((()=>{n.forEach((n=>{t.forEach((t=>{"add"===e?n.classList.add(t):n.classList.remove(t)}))}))}),i)}function I(){const n=window.innerHeight/window.innerWidth;a>n?(o.width=window.innerHeight/a,o.height=window.innerHeight,c=window.innerHeight/640,s.style=`--scale:${c}`):(o.width=window.innerWidth,o.height=window.innerWidth*a,c=window.innerWidth/360,s.style=`--scale:${c}`)}I(),window.addEventListener("resize",I)})();