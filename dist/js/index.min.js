(()=>{"use strict";var n={};n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p;const e={Click:new Howl({src:"./audio/click.wav",html5:!0}),Confetti:new Howl({src:"./audio/confetti.wav",html5:!0}),End:new Howl({src:"./audio/end.wav",html5:!0}),Tap1:new Howl({src:"./audio/tap_1.wav",html5:!0}),Tap2:new Howl({src:"./audio/tap_2.wav",html5:!0}),Tap3:new Howl({src:"./audio/tap_3.wav",html5:!0}),Tap4:new Howl({src:"./audio/tap_4.wav",html5:!0}),Tap5:new Howl({src:"./audio/tap_5.wav",html5:!0}),Tap6:new Howl({src:"./audio/tap_6.wav",html5:!0}),Tap7:new Howl({src:"./audio/tap_7.wav",html5:!0}),Tap8:new Howl({src:"./audio/tap_8.wav",html5:!0})},t=["\n-+d|\na+-|\n","\n++a|\nd++|\n","\nc+a|\n+a-|\n","\n+ac|\nca+|\n","\naf+|\n+c+|\n","\n-+f|\n++-|\n+a-|\n","\na++|\n+if|\n+++|\n","\n+++|\n+da|\na++|\n","\na+a|\n-++|\ne++|\n","\n-+a-|\n++-a|\n+d++|\n","\n-+++|\na+e+|\n+++-|\n","\n+++a|\n+-++|\n+ha-|\n","\n+e++|\n+++j|\n-a++|\n","\n+++a|\n+f+-|\n+a+e|\n","\n++m-|\n+++g|\na+-+|\n-+++|\n","\na-a+|\n++++|\ni+-+|\n-+++|\n","\n-+++|\n+d-+|\n++j+|\na+--|\n","\n-a++|\n++-+|\n++++|\nk-+a|\n","\n+++-|\n+a+-|\n++++|\n+-++|\n+j+-|\n","\n+++a|\n+g++|\n++++|\n-++-|\n-ia-|\n","\n++-r+|\n+++++|\n+-+++|\n+++a+|\n","\nal+++|\n+++-+|\n+-+++|\n++a--|\n","\na-++-|\n+++a+|\n-d+-+|\nh++a+|\n","\n--+++|\n++a-+|\n++g++|\n+ai+-|\n","\nh-f+-|\n+a+++|\n+-+a+|\n++++a|\n","\n-+++g|\n++a++|\nai-a+|\n++++-|\n+++--|\n","\n-++++|\n-++k+|\n++a++|\n+-+++|\ne++-u|\n","\na+++e|\n--+++|\n+++++|\n+-a++|\n+j++a|\n","\nk-+++|\n+++-+|\n+++ja|\n+-+++|\n+++-a|\n","\n++++l|\n++a++|\nh+-++|\n--a++|\n--+++|\n","\n+++x+|\n+++++|\n+h+++|\n+-+++|\n++++a|\n","\n+a++-|\n+-+++|\n+++++|\n++-z+|\n+++++|\n-++++|\n","\na+++a|\n-+++-|\na+e+g|\n-++++|\na++++|\n-++-j|\n","\na++++|\n++++j|\n+++++|\n--p--|\n+++++|\n++++z|\n","\n-++g-|\n-++f-|\n-++++|\na+i-a|\n-++a+|\n-++++|\n","\n+++-a|\n+++y+|\n+++++|\n+-f++|\n+-+++|\nn++++|\n"],a={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()}};vkBridge.send("VKWebAppInit");const o=document.querySelector("canvas");o.getContext("2d");const i=640/360;o.width=360,o.height=640;let c=1;const s=document.querySelector(".wrapper"),r=document.querySelectorAll(".screen"),d=(document.querySelector(".screen--start"),document.querySelector(".screen--game")),l=(document.querySelector(".screen--end"),document.querySelector(".play")),u=document.querySelector(".group"),m=document.querySelector(".post"),h=document.querySelector(".invite"),p=document.querySelector(".volume"),v=document.querySelector(".home"),f=document.querySelector(".restart"),g=document.querySelector(".lvl span"),w=document.querySelector(".preloader");let y=!0;w.classList.add("hidden");const L=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];let x,E,S,b,k,q,A,C,T,H=0,B=!1;function _(n){g.textContent=n+1;const e=t[n].replace(/\r?\n/g,"").trim();let o=0;for(let n of e)"|"===n&&o++;const i=e.indexOf("|");let c;switch(i){case 3:c=40;break;case 4:c=30;break;case 5:c=20}let s=`<div class="grid" style="--columns:${i};--rows:${o};--width:340px;--height:${340/i*o}px;--size:${c}px">\n`;for(let n of e)if("|"!==n){let e="",t="";"+"!==n&&"-"!==n?(n=L.indexOf(n)+1,e=n,t=1===n?"start active":"end"):"-"===n&&(t="hidden"),s=s.concat(`<div class="grid__item ${t}">${e}</div>\n`)}s=s.concat("</div>"),d.insertAdjacentHTML("afterbegin",s),x=document.querySelector(".grid"),E=document.querySelectorAll(".grid__item"),S=document.querySelectorAll(".grid__item.start"),b=1,k=0,E.forEach((n=>{n.classList.contains("hidden")||k++})),a.any()?S.forEach((n=>{n.addEventListener("touchstart",(()=>{q=[n],document.addEventListener("touchmove",$),document.addEventListener("touchend",O)}))})):S.forEach((n=>{n.addEventListener("mousedown",(()=>{q=[n],document.addEventListener("mousemove",$),document.addEventListener("mouseup",O)}))}))}_(H),P(d),document.addEventListener("click",(n=>{const t=n.target;if(t===l)P(d);else if(t===u)vkBridge.send("VKWebAppJoinGroup",{group_id:213140436});else if(t===m){let n=10;vkBridge.send("VKWebAppShowWallPostBox",{message:`Мой уровень в игре Game - ${n}! Сможешь побить?\n\nOrby Games (vk.com/orby.games) - бесплатные игры для ВКонтакте. Присоединяйся!\n\n#игры #vkgames #directgames`,attachments:"https://vk.com/appID"})}else t===h?vkBridge.send("VKWebAppShowInviteBox"):t===f?(x.remove(),_(H)):t===p&&(y=!y,p.classList.toggle("off"));var a,o;t.closest("button")&&(a=[t.closest("button")],200,o="scale",a.forEach((n=>{n.classList.add(o),setTimeout((()=>{n.classList.remove(o)}),200)})),y&&e.Click.play())}));let W=!0;function $(n){if(!B){if(a.any()){const e=n.touches[0],t=document.elementFromPoint(e.clientX,e.clientY);A=t}else A=n.target;if(A.closest(".grid")){if(A.classList.contains("start")||A.classList.contains("active")||(A.classList.contains("hidden")?O():(C=q[q.length-1].getBoundingClientRect(),T=A.getBoundingClientRect(),T.x<C.x&&T.y>C.y||T.x<C.x&&T.y<C.y||T.x>C.x&&T.y>C.y||T.x>C.x&&T.y<C.y?O():A.classList.contains("end")?A.textContent==b+1?(j(),x.querySelectorAll(".start").length>1&&q.forEach((n=>{n.classList.add("completed")})),x.querySelectorAll(".end.completed").length&&(a.any()?document.removeEventListener("touchmove",$):document.removeEventListener("mousemove",$)),setTimeout((()=>{B||(console.log(!0),confetti({particleCount:50,decay:c/2,ticks:40,spread:360,gravity:0,scalar:c,colors:["#fe5cd7"],origin:{x:(T.x+41.25*c)/window.innerWidth,y:(T.y+41.25*c)/window.innerHeight}}))}),1)):(W&&O(),W=!1):W?q[q.length-1].classList.contains("completed")||(j(),A.textContent=b):O())),A.classList.contains("active")&&(A.classList.contains("completed")?O():b-1==A.textContent?E.forEach((n=>{n.textContent==b&&q.includes(n)&&setTimeout((()=>{b--,W=!0,n.classList.remove("active","top","left","right","bottom"),q.splice(q.indexOf(n),1),n.classList.contains("end")||(n.textContent="")}),1)})):b>A.textContent&&O()),x.querySelectorAll(".active").length>=k&&!B){z([v,f],"add",["hidden"]),y&&e.Confetti.play(),H++,H<36&&setTimeout((()=>{a.any()?document.removeEventListener("touchmove",$):document.removeEventListener("mousemove",$),z([v,f],"remove",["hidden"]),x.remove(),_(H),B=!1}),2e3),B=!0;const n=["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"];confetti({particleCount:100,angle:60,spread:90,gravity:1.5,origin:{x:0,y:.6},colors:n}),confetti({particleCount:100,angle:120,spread:90,gravity:1.5,origin:{x:1,y:.6},colors:n})}}else O()}}function j(){vkBridge.send("VKWebAppTapticImpactOccurred",{style:"light"}),T.y>C.y&&A.classList.add("top"),T.y<C.y&&A.classList.add("bottom"),T.x>C.x&&A.classList.add("left"),T.x<C.x&&A.classList.add("right"),q.push(A),A.classList.add("active"),b++}function O(){B||(W=!0,b=1,q=[],a.any()?document.removeEventListener("touchmove",$):document.removeEventListener("mousemove",$),E.forEach((n=>{n.classList.contains("completed")||n.classList.remove("active","top","left","right","bottom"),n.classList.contains("start")&&n.classList.add("active"),n.classList.contains("start")||n.classList.contains("end")||n.classList.contains("completed")||(n.textContent="")})))}function P(n){r.forEach((e=>{let t="hidden--left",a="hidden--right";n.classList.contains("hidden--left")&&(t="hidden--right",a="hidden--left"),e.classList.contains("hidden")?e===n&&z([e],"remove",["hidden",a],0):z([e],"add",["hidden",t],0)}))}function z(n,e,t,a=0){setTimeout((()=>{n.forEach((n=>{t.forEach((t=>{"add"===e?n.classList.add(t):n.classList.remove(t)}))}))}),a)}function I(){const n=window.innerHeight/window.innerWidth;i>n?(o.width=window.innerHeight/i,o.height=window.innerHeight,c=window.innerHeight/640,s.style=`--scale:${c}`):(o.width=window.innerWidth,o.height=window.innerWidth*i,c=window.innerWidth/360,s.style=`--scale:${c}`)}I(),window.addEventListener("resize",I)})();